<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../partials/head'); %>
</head>
<%- include('../partials/Modal'); %>
<body class="container">

    <header>
        <%- include('../partials/header'); %>
    </header>

    <main>
        <div class="jumbotron">
            <h2>Scheduled Appointments</h2>
            <div>
                <div>
                  <button class="btn btn-link" id="myBtn">New Appointment With Existing Customer</button>
                  <!-- Add A New Appointment Modal -->
                  <div id="myModal" class="modal">
                      <!-- Modal content -->
                      <div class="modal-content">
                        <span class="close">&times;</span>
                        <!--Content goes here-->
                        <h2 class="text-center" >New Appointment With Existing Customer</h2>
                        <form class="jumbotron" action="/home/new/existing" method="POST">
                          <!-- Colum 1 for New Appoinment Modal -->
                          <div class="col-xs-3">
                            <label>Customer</label>
                            <select class="form-control" name="customer_id" id="customer_id">
                              <% customers.forEach(function(customers) { %>   
                                <option name="customer_id" value=<%=customers.customer_id %>><%=customers.last_name%>, <%=customers.first_name%> <%=customers.street%> </option>
                              <% }); %>
                            </select>
                          </div> 
                          <!-- Colum 2 for New Appoinment Modal -->
                          <div class="col-xs-4">
                            <label>Date Of Appointment</label> 
                              <input class="form-control" name="date" id="date" type="text" placeholder="yyyy-mm-dd">
                            <label>Time Of Appointment</label> 
                              <input class="form-control" name="time" id="time" type="text" placeholder="hh:mm:ss AM/PM">
                            <label>Main Service To be Done</label>
                              <select class="form-control" name="services" id="services">
                                <% services.forEach(function(services) { %>              
                                  <option name="services" value=<%=services.service_id %>><%=services.service_name%></option>
                                <% }); %>
                              </select>
                            <label>Comment:</label>
                              <textarea class="form-control" rows="5" name="quotecomment" id="comment"></textarea>
                            <!--Drop down for employee goes here...-->
                            <label>Employee Assigned</label>
                              <select class="form-control" name="employee" id="employee">
                                <% employee.forEach(function(employee) { %>              
                                  <option name="employee" value=<%=employee.employee_id %>><%=employee.last_name%>, <%=employee.first_name%></option>
                                <% }); %>
                              </select>
                            <!--Drop Down for Application Status goes here-->
                            <label>Appointment Status</label>
                              <select class="form-control" name="app_status" id="app_status">           
                                  <option value="Pending">Pending</option>
                                  <option value="Ongoing">Ongoing</option>
                                  <option value="Completed">Completed</option>
                                  <option value="Cancelled">Cancelled</option>
                              </select>
                          </div>
                          <!-- Colum 3 for New Appoinment Modal -->
                          <div class="col-xs-3">
                            <label>Quote Total</label><br>
                              <div class="input-group mb-3">
                                  <div class="input-group-prepend">
                                    <span class="input-group-text">$</span>
                                    <span class="input-group-text">0.00</span>
                                    <input type="text" class="form-control" name="quote" aria-label="Amount (to the nearest dollar)">
                                  </div>
                              </div>
                            <button type="submit" style="color:#198754" class="btn btn-success">Submit</button>
                          </div>                      
                        </form> 
                      </div>                   
                  </div>                 
                  <button class="btn btn-link" id="myBtn2">New Appointment With New Customer</button>
                  <!-- Add A New Appointment Modal -->
                  <div id="myModal2" class="modal">
                      <!-- Modal content -->
                      <div class="modal-content">
                        <span class="close2">&times;</span>
                        <!--Content goes here-->
                        <h2 class="text-center" >Schedule An Appointment</h2>
                        <form class="jumbotron" action="/home/new" method="POST">
                          <!-- Colum 1 for New Appoinment Modal -->
                          <div class="col-xs-3">
                            <label>First Name</label>
                              <input class="form-control" name="firstname" id="firstname" placeholder="John">
                            <label>Last Name</label>
                              <input class="form-control" name="lastname" id="lastname" placeholder="Doe">
                            <label>Phone</label>
                              <input class="form-control" name="phone" id="exphone1" placeholder="7131234567">
                            <label>Email</label>
                              <input class="form-control" name="email" id="email" placeholder="johndoe@gmail.com">
                            <label>Street</label>
                              <input class="form-control" name="street" id="street" placeholder="1234 Real Street">
                            <label>City</label>
                              <input class="form-control" name="city" id="city" value="Houston">
                            <!--drop down for state-->
                            <label>State</label>
                              <select class="form-control" name="state" id="state">
                                <% states.forEach(function(states) { %>              
                                  <option value=<%=states.state_code_id %>><%=states.state_name %></option>
                                <% }); %>
                              </select>
                            <label>Zipcode</label>
                            <input class="form-control" name="zipcode" id="zipcode" type="text" placeholder="77000" >
                          </div> 
                          <!-- Colum 2 for New Appoinment Modal -->
                          <div class="col-xs-4">
                            <label>Date Of Appointment</label> 
                              <input class="form-control" name="date" id="date" type="text" placeholder="yyyy-mm-dd">
                            <label>Time Of Appointment</label> 
                              <input class="form-control" name="time" id="time" type="text" placeholder="hh:mm:ss AM/PM">
                            <label>Main Service To be Done</label>
                              <select class="form-control" name="services" id="services">
                                <% services.forEach(function(services) { %>              
                                  <option name="services" value=<%=services.service_id %>><%=services.service_name%></option>
                                <% }); %>
                              </select>
                            <label>Comment:</label>
                              <textarea class="form-control" rows="5" name="quotecomment" id="comment"></textarea>
                            <!--Drop down for employee goes here...-->
                            <label>Employee Assigned</label>
                              <select class="form-control" name="employee" id="employee">
                                <% employee.forEach(function(employee) { %>              
                                  <option name="employee" value=<%=employee.employee_id %>><%=employee.last_name%>, <%=employee.first_name%></option>
                                <% }); %>
                              </select>
                            <!--Drop Down for Application Status goes here-->
                            <label>Appointment Status</label>
                              <select class="form-control" name="app_status" id="app_status">           
                                  <option value="Pending">Pending</option>
                                  <option value="Ongoing">Ongoing</option>
                                  <option value="Completed">Completed</option>
                                  <option value="Cancelled">Cancelled</option>
                              </select>
                          </div>
                          <!-- Colum 3 for New Appoinment Modal -->
                          <div class="col-xs-3">
                            <label>Quote Total</label><br>
                              <div class="input-group mb-3">
                                  <div class="input-group-prepend">
                                    <span class="input-group-text">$</span>
                                    <span class="input-group-text">0.00</span>
                                    <input type="text" class="form-control" name="quote" aria-label="Amount (to the nearest dollar)">
                                  </div>
                              </div>
                            <button type="submit" style="color:#198754" class="btn btn-success">Submit</button>
                          </div>                      
                        </form> 
                      </div>                   
                  </div>
                  <button class="btn btn-link" id="myBtn3">Update Existing Appointment</button>
                  <!-- Add Update Appointment Modal -->        
                  <div id="myModal3" class="modal">       
                        <!-- Modal content -->
                        <div class="modal-content">
                          <span class="close3">&times;</span>
                          <!--Content goes here-->
                          <h2 class="text-center">Update An Appointment</h2>
                          <form action="/home/update" method="POST">
                          <div class="jumbotron">
                            <!--drop down for Job ID -->
                            <label for="ex1">Select the Appointment ID You Wish to Update</label>
                            <select class="form-control" name="job_id" id="job_id">
                              <% update_dropdown.forEach(function(update_dropdown) { %>              
                                <option value=<%= update_dropdown.job_id%>><%= update_dropdown.job_id%></option>
                              <% }); %>
                            </select>
                            <br>
                            <button type="submit" style="color:#198754" class="btn btn-success">Submit</button>
                          </div>                     
                          </form>
                        </div>
                    </div>
    
                    <button class="btn btn-link" id="myBtn4">Delete Exisiting Appointment</button>
                    <div id="myModal4" class="modal">
                        <!-- Modal content -->
                        <div class="modal-content">
                          <span class="close4">&times;</span>
                          <!--Content goes here-->
                          <h2>Delete Existing Appointment</h2>
                          <form action="/home" method="post">
                            <div class="jumbotron">
                              <!--drop down for Job ID -->
                              <label for="ex1">Select the Appointment ID You Wish to Delete</label>
                              <select class="form-control" name="job_id" id="job_id">
                                <% update_dropdown.forEach(function(update_dropdown) { %>              
                                  <option value=<%= update_dropdown.job_id%>><%= update_dropdown.job_id%></option>
                                <% }); %>
                              </select>
                              <br>
                              <button type="submit" style="color:#198754" class="btn btn-success">Submit</button>
                            </div>                     
                            </form>
                        </div>                    
                    </div>
                  </div>
            <div>
                <table class="table">
                    <thead class="table-dark">
                        <tr>
                            <th>Appointment ID</th>
                            <th>Name</th>
                            <th>Phone</th>
                            <th>Address</th>
                            <th>Appointment Status</th>
                            <th>Appointment Date</th>
                            <th>Invoice Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% appointments.forEach(function(appointments) { %>
                        <tr>
                          <td> <%= appointments.job_id%></td>
                          <td> <%=appointments.last_name%>, <%= appointments.first_name%></td>
                          <td> <%= appointments.phone%></td>
                          <td> <%= appointments.street%><br><%=appointments.city%>,&nbsp<%=appointments.state_code_id%>&nbsp<%=appointments.zipcode%></td>
                          <td><%=appointments.app_status%></td>
                          <td><%=appointments.app_date%></td>
                          <td><%=appointments.invoice_status%></td>
                        </tr>
                    </tbody>
                      <% }); %>
                </table>    
            </div>
    </main>

    <footer>
        <%- include('../partials/footer'); %>
    </footer>

</body>
</html>